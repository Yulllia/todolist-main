(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]});},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{c:()=>S});var t="todos";function n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=o(n),s=Array.from(e.childNodes).find((function(e){return e.classList.contains("todo-text");}));if(s){var r=i.filter((function(e){return e!==s.innerText;}));sessionStorage.setItem(n,JSON.stringify(r));}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=sessionStorage.getItem(e);return n?JSON.parse(n):[];}var i="completed",s="uncompleted";function r(e,t){var n,o=sessionStorage.getItem(t),i=o.substring(1,o.length-1).replace(/"/g,"").split(",");i=i.filter((function(t){return t!==e;})),sessionStorage.removeItem(t),0!==(null===(n=i[0])||void 0===n?void 0:n.length)&&sessionStorage.setItem(t,JSON.stringify(i));}function d(e,t){var n=a(t);n.push(e),sessionStorage.setItem(t,JSON.stringify(n));}function a(e){var t=sessionStorage.getItem(e);return console.log(t),t?JSON.parse(t):[];}var l=function(e){var t=document.createElement("li");t.classList.add("todo-item");var o=document.createElement("span");o.innerText=e,o.classList.add("todo-text"),t.appendChild(o);var r=document.createElement("button");r.innerHTML="<i class='fas fa-check'></i>",r.classList.add("todo-check-button"),r.addEventListener("click",function(e){return function(t){t.preventDefault(),e.classList.toggle("todo-item_completed");};}(t)),t.appendChild(r),r.addEventListener("click",c(o)),r.addEventListener("click",function(e){return function(t){t.preventDefault(),e.addEventListener("transitionend",(function(){e.remove();}));};}(o));var d=document.createElement("button");return d.innerHTML="<i class='fas fa-trash'></i>",d.classList.add("todo-remove-button"),d.addEventListener("click",function(e){return function(t){t.preventDefault(),e.classList.add("todo-item_fall"),e.addEventListener("transitionend",(function(){n(e),n(e,i),n(e,s),e.remove();})),S();};}(t)),t.appendChild(d),t;};function c(e){return function(t){t.preventDefault(),a(i).includes(e.innerHTML)?(d(e.innerHTML,s),r(e.innerHTML,i)):(d(e.innerHTML,i),r(e.innerHTML,s));};}function u(e){return console.log(e),{todoInput:document.querySelector(".todo-input"),todoHelper:document.querySelector(".todo-helper"),todoButton:document.querySelector(".todo-button")};}function v(e){var t,n=u(e),o=n.todoInput,i=n.todoHelper,s=n.todoButton;(null===(t=o.value)||void 0===t?void 0:t.length)>=3?(s.classList.remove("todo-button_disabled"),i.classList.remove("todo-helper_visible")):(s.classList.add("todo-button_disabled"),o.addEventListener("keypress",(function(e){var t;if("Enter"===e.key&&(null===(t=o.value)||void 0===t?void 0:t.length)<3)return e.preventDefault(),!1;})),o.addEventListener("focus",(function(){i.classList.add("todo-helper_visible");})));}var f=document.querySelector(".todo-input-wrapper"),p=u(f),m=p.todoInput,L=p.todoButton,g=document.querySelector(".todo-list"),h=document.querySelector(".todo-select");function y(e){var n,i;e.preventDefault(),n=m.value,(i=o()).push(n),sessionStorage.setItem(t,JSON.stringify(i)),d(m.value,s);var r=l(m.value);g.appendChild(r),function(e){var t=u(e),n=t.todoInput,o=t.todoHelper,i=t.todoButton;n.value="",i.classList.add("todo-button_disabled"),o.classList.add("todo-helper_visible");}(f);}function b(){g.hasChildNodes()&&h.removeAttribute("disabled");}function S(){setTimeout((function(){g.hasChildNodes()||h.setAttribute("disabled",!0);}),300);}document.addEventListener("DOMContentLoaded",(function(){o().forEach((function(e){var t=l(e);g.appendChild(t);})),v(f),sessionStorage.setItem(i,[]),sessionStorage.getItem(t)&&sessionStorage.setItem(s,sessionStorage.getItem(t));})),m.addEventListener("input",(function(){return v(f);})),L.addEventListener("click",y),L.addEventListener("click",y),L.addEventListener("click",b),h.addEventListener("change",(function(e){var t,n;t=g.childNodes,n=e.target.value,t.length&&t.forEach((function(e,t){switch(n){case"completed":e.classList.contains("todo-item_completed")?(e.style.display="flex",c(t),d(e.innerHTML,i)):(e.style.display="none",r(e.innerHTML,i));break;case"uncompleted":e.classList.contains("todo-item_completed")?(e.style.display="none",r(e.innerHTML,s)):(e.style.display="flex",d(e.innerHTML,s));break;default:return void(e.style.display="flex");}}));})),h.addEventListener("change",S),S(),b();})();